<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Template QA Tool</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<script>
  (function () {
    const PW = "VerySecret";
    const entered = prompt("Passwort:");
    if (entered !== PW) {
      document.documentElement.innerHTML = "";
    }
  })();
</script>

    <!-- Header -->
    <header class="main-header">
        <img src="pw-logo.png" alt="PW Logo" class="header-logo">
        <h1>Automatische PrÃ¼fung und Optimierung von E-Mail-Templates</h1>
    </header>

    <!-- Main Control Panel (gemÃ¤ÃŸ Scribble) -->
    <div class="control-panel">
        <!-- Upload Button -->
        <div class="control-item">
            <input type="file" id="fileInput" accept=".html,.htm" style="display: none;" />
            <button id="uploadBtn" class="btn-upload">
                ðŸ“ Upload Template
            </button>
            <div id="fileName" class="file-name-display"></div>
        </div>

        <!-- Checklist Typ (Radio Buttons) -->
        <div class="control-item">
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="checklistType" value="standard" id="checklistStandard" checked>
                    <span>Checklist Typ: Standard</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="checklistType" value="dpl" id="checklistDPL">
                    <span>Checklist Typ: DPL</span>
                </label>
            </div>
        </div>

        <!-- Pre-Header + Textfeld -->
        <div class="control-item control-inline">
            <label for="preheaderText" class="inline-label">Pre-Header</label>
            <input type="text" id="preheaderText" class="inline-input" placeholder="Freitextfeld" />
        </div>

        <!-- Checkbox Externe Fonts -->
        <div class="control-item">
            <label class="checkbox-label">
                <input type="checkbox" id="removeFonts" checked>
                <span>Externe Fonts entfernen</span>
            </label>
        </div>

        <!-- Action Buttons: Links nebeneinander -->
        <div class="control-actions">
            <button id="processBtn" class="btn-action" disabled>
                âš™ï¸ Template verarbeiten
            </button>
            <button id="downloadOptimized" class="btn-download" disabled>
                â¬‡ï¸ Download Optimized Temp.
            </button>
        </div>

        <!-- Inspector Button: Rechts separat -->
        <div class="control-inspector">
            <button id="showInspectorBtn" class="btn-inspector" disabled>
                ðŸ” Open Inspector
            </button>
        </div>
    </div>

    <!-- Hidden: Upload Hint -->
    <div id="uploadHint" style="display: none;"></div>

    <!-- Hidden: Old Results Section Elements (fÃ¼r KompatibilitÃ¤t) -->
    <div id="resultsSection" style="display: none;">
        <div id="statusBadge"></div>
        <button id="downloadReport" style="display: none;"></button>
        <button id="downloadUnresolved" style="display: none;"></button>
        <button id="downloadFinalOutput" style="display: none;"></button>
        <button id="showDiffBtn" style="display: none;"></button>
        <button id="showTagReviewBtn" style="display: none;"></button>
        <button id="showAssetReviewBtn" style="display: none;"></button>
        <div id="tagReviewHint" style="display: none;"></div>
        <div id="reportPreview" style="display: none;"></div>
    </div>

    <!-- Inspector Section (gemÃ¤ÃŸ Scribble) -->
    <section id="inspectorSection" class="inspector-section" style="display: none;">
        <!-- Tabs -->
        <div class="inspector-tabs">
            <button id="trackingTab" class="inspector-tab active" data-tab="tracking">
                Tracking
            </button>
            <button id="imagesTab" class="inspector-tab" data-tab="images">
                Bilder
            </button>
            <button id="tagReviewTab" class="inspector-tab" data-tab="tagreview">
                Tag-Review
            </button>
            <button id="editorTab" class="inspector-tab" data-tab="editor">
                Editor
            </button>
            <button id="buttonsTab" class="inspector-tab" data-tab="buttons">
                Buttons
            </button>
        </div>

        <!-- 2-Spalten-Layout -->
        <div class="inspector-layout">
            <!-- Linke Spalte: Quellcode Template -->
            <div class="inspector-left">
                <h3>Quellcode Template</h3>
                
                <!-- Tracking Panel -->
                <div id="trackingPanel" class="inspector-panel active">
                    <div id="trackingContent" class="panel-content">
                        <!-- Wird dynamisch gefÃ¼llt -->
                    </div>
                </div>
                
                <!-- Images Panel -->
                <div id="imagesPanel" class="inspector-panel" style="display: none;">
                    <div id="imagesContent" class="panel-content">
                        <!-- Wird dynamisch gefÃ¼llt -->
                    </div>
                </div>
                
                <!-- Tag-Review Panel -->
                <div id="tagreviewPanel" class="inspector-panel" style="display: none;">
                    <div id="tagreviewContent" class="panel-content">
                        <!-- Wird dynamisch gefÃ¼llt -->
                    </div>
                </div>
                
                <!-- Editor Panel -->
                <div id="editorPanel" class="inspector-panel" style="display: none;">
                    <div id="editorContent" class="panel-content">
                        <!-- Wird dynamisch gefÃ¼llt -->
                    </div>
                </div>
                
                <!-- Buttons Panel -->
                <div id="buttonsPanel" class="inspector-panel" style="display: none;">
                    <div id="buttonsContent" class="panel-content">
                        <!-- Wird dynamisch gefÃ¼llt -->
                    </div>
                </div>
            </div>

            <!-- Rechte Spalte: Webansicht Template (Preview) -->
            <div class="inspector-right">
                <h3>Webansicht Template</h3>
                <div class="preview-container">
                    <iframe id="inspectorPreviewFrame" sandbox="allow-scripts allow-same-origin" class="inspector-preview-frame"></iframe>
                </div>
            </div>
        </div>

        <!-- Untere Button-Leiste -->
        <div class="inspector-footer">
            <button id="commitChangesBtn" class="btn-footer-left">
                âœ… Anpassungen Ã¼bernehmen
            </button>
            <button id="downloadManualOptimized" class="btn-footer-right" disabled>
                â¬‡ï¸ Download manuell optimized Temp.
            </button>
        </div>
    </section>

    <!-- Hidden: Old Inspector Elements (fÃ¼r KompatibilitÃ¤t) -->
    <div style="display: none;">
        <div id="globalPendingIndicator">
            <div id="trackingStatusChip"></div>
            <div id="imagesStatusChip"></div>
            <div id="tagreviewStatusChip"></div>
            <div id="editorStatusChip"></div>
            <div id="pendingWarning"></div>
        </div>
        <button id="globalFinalizeBtn"></button>
    </div>

    <!-- Diff Modal (unverÃ¤ndert fÃ¼r KompatibilitÃ¤t) -->
    <div id="diffModal" class="diff-modal" style="display: none;">
        <div class="diff-modal-content">
            <div class="diff-modal-header">
                <h2>ðŸ“Š Ã„nderungen zwischen Original und Optimiert</h2>
                <button id="closeDiffModal" class="close-modal">Ã—</button>
            </div>
            <div class="diff-info">
                â„¹ï¸ Diese Ansicht zeigt nur Ã„nderungen. Es werden keine Anpassungen vorgenommen.
            </div>
            <div id="diffPendingHint" class="diff-pending-hint" style="display: none;">
                <strong>Hinweis:</strong> Es gibt nicht Ã¼bernommene Ã„nderungen. Diff zeigt den letzten Ã¼bernommenen Stand.
            </div>
            <div class="diff-container">
                <div class="diff-pane">
                    <h3>ðŸ“„ Original</h3>
                    <pre id="diffOriginal" class="diff-code"></pre>
                </div>
                <div class="diff-pane">
                    <h3>âœ… Optimiert</h3>
                    <pre id="diffOptimized" class="diff-code"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== LEGACY COMPATIBILITY BLOCK ===== -->
    <!-- Alle DOM-Elemente, die app.js erwartet, aber im neuen UI nicht sichtbar sind -->
    <div id="legacyCompat" style="display: none;">
        <!-- Old Results Section Elements -->
        <section id="resultsSection">
            <div id="statusBadge"></div>
            <div id="uploadHint"></div>
            <div id="reportPreview"></div>
            <button id="downloadReport"></button>
            <button id="downloadUnresolved"></button>
            <button id="downloadFinalOutput"></button>
            <button id="showDiffBtn"></button>
            <button id="showTagReviewBtn"></button>
        </section>
        
        <!-- Diff Modal -->
        <div id="diffModal">
            <button id="closeDiffModal"></button>
            <div id="diffPendingHint"></div>
            <pre id="diffOriginal"></pre>
            <pre id="diffOptimized"></pre>
        </div>
        
        <!-- Tag-Review Modal -->
        <div id="tagReviewModal">
            <button id="closeTagReviewModal"></button>
            <div id="tagProblemsList"></div>
            <button id="undoLastAction"></button>
            <iframe id="webPreviewFrame"></iframe>
            <pre id="codePreviewContent"></pre>
            <button id="showWebPreview"></button>
            <button id="showCodePreview"></button>
            <div id="webPreviewContainer"></div>
            <div id="codePreviewContainer"></div>
            <div id="changeSnippet">
                <pre id="snippetBefore"></pre>
                <pre id="snippetAfter"></pre>
            </div>
            <div id="tagReviewHint"></div>
            <span id="problemsCountBadge"></span>
            <span id="autoFixesCountBadge"></span>
            <button id="commitReviewChanges"></button>
            <div id="reviewHint"></div>
            <div id="autoFixesList"></div>
            <div id="manualActionsCounter"></div>
        </div>
        
        <!-- Asset-Review Modal -->
        <div id="assetReviewModal">
            <button id="closeAssetReviewModal"></button>
            <button id="assetUndoBtn"></button>
            <button id="assetCommitBtn"></button>
            <iframe id="assetWebPreviewFrame"></iframe>
            <pre id="assetCodePreviewContent"></pre>
            <button id="showAssetWebPreview"></button>
            <button id="showAssetCodePreview"></button>
            <div id="assetWebPreviewContainer"></div>
            <div id="assetCodePreviewContainer"></div>
            <div id="assetActionsCounter"></div>
            <div id="preheaderInfo"></div>
            <div id="imagesList"></div>
            <div id="linksList"></div>
            <div id="trackingInfo"></div>
        </div>
        
        <!-- Global Finalize Button (jetzt in Footer) -->
        <button id="globalFinalizeBtn"></button>
        
        <!-- Global Pending Indicator -->
        <div id="globalPendingIndicator">
            <span id="trackingStatusChip"></span>
            <span id="imagesStatusChip"></span>
            <span id="tagreviewStatusChip"></span>
            <span id="editorStatusChip"></span>
            <span id="buttonsStatusChip"></span>
            <div id="pendingWarning"></div>
        </div>
    </div>
    <!-- ===== END LEGACY COMPATIBILITY BLOCK ===== -->

    <!-- Toast Container (fÃ¼r Phase 12 Toasts) -->
    <div id="inspectorToast" class="inspector-toast"></div>

    <script src="app.js"></script>
</body>
</html>
